!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).SmoothDnD={})}(this,function(e){"use strict";var l,t,r="smooth-dnd-container-instance",b="smooth-dnd-draggable-wrapper",i="animated",p="__smooth_dnd_draggable_translation_value",a="__smooth_dnd_draggable_visibility_value",C="smooth-dnd-ghost",w="smooth-dnd-container",u="smooth-dnd-extra-size-for-insertion",h="smooth-dnd-stretcher-element",v="smooth-dnd-stretcher-instance",c="smooth-dnd-disable-touch-action",s="smooth-dnd-no-user-select",d="smooth-dnd-prevent-auto-scroll-class",y="smooth-dnd-drop-preview-default-class",x="smooth-dnd-drop-preview-inner-class",E="smooth-dnd-drop-preview-constant-class",S="smooth-dnd-drop-preview-flex-container-class",n=Object.freeze({containerInstance:r,defaultGroupName:"@@smooth-dnd-default-group@@",wrapperClass:b,defaultGrabHandleClass:"smooth-dnd-default-grap-handle",animationClass:i,translationValue:p,visibilityValue:a,ghostClass:C,containerClass:w,extraSizeForInsertion:u,stretcherElementClass:h,stretcherElementInstance:v,isDraggableDetached:"smoth-dnd-is-draggable-detached",disbaleTouchActions:c,noUserSelectClass:s,preventAutoScrollClass:d,dropPlaceholderDefaultClass:y,dropPlaceholderInnerClass:x,dropPlaceholderWrapperClass:E,dropPlaceholderFlexContainerClass:S}),D={groupName:void 0,behaviour:"move",orientation:"vertical",getChildPayload:void 0,animationDuration:250,autoScrollEnabled:!0,shouldAcceptDrop:void 0,shouldAnimateDrop:void 0};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(t=l=l||{}).x="x",t.y="y",t.xy="xy";function O(e,t,n){return"x"===n?{left:Math.max(e.left,t.left),top:e.top,right:Math.min(e.right,t.right),bottom:e.bottom}:{left:e.left,top:Math.max(e.top,t.top),right:e.right,bottom:Math.min(e.bottom,t.bottom)}}function R(e,t){var n=window.getComputedStyle(e),o=n.overflow,r=n["overflow-".concat(t)];return"auto"===o||"scroll"===o||("auto"===r||"scroll"===r)}function A(t,n){var o=[];function e(){o&&(o.forEach(function(e){return e.removeEventListener("scroll",n)}),window.removeEventListener("scroll",n))}return function(){var e=t;for(;e;)(R(e,"x")||R(e,"y"))&&o.push(e),e=e.parentElement}(),{dispose:function(){e(),o=null},start:function(){o&&(o.forEach(function(e){return e.addEventListener("scroll",n)}),window.addEventListener("scroll",n))},stop:e}}var I=function(e,t){return{left:Math.max(e.left,t.left),top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom)}},T=function(e){var t,n,o=e.getBoundingClientRect(),r={left:o.left,right:o.right,top:o.top,bottom:o.bottom};return P(e,"x")&&!B(e,"x")&&(t=r.right-r.left,r.right=r.right+e.scrollWidth-t),P(e,"y")&&!B(e,"y")&&(n=r.bottom-r.top,r.bottom=r.bottom+e.scrollHeight-n),r},B=function(e,t){var n=window.getComputedStyle(e),o=n.overflow,r=n["overflow-".concat(t)];return"auto"===o||"scroll"===o||"hidden"===o||("auto"===r||"scroll"===r||"hidden"===r)},P=function(e,t){return"x"===t?e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight},N=function(e,t){for(var n=e,o=t||T(e),n=e.parentElement;n;)P(n,"x")&&B(n,"x")&&(o=O(o,n.getBoundingClientRect(),"x")),P(n,"y")&&B(n,"y")&&(o=O(o,n.getBoundingClientRect(),"y")),n=n.parentElement;return o},z=function(e,n){for(var o=e;o;){if(o[r]){var t=function(){var t=o[r];if(n.some(function(e){return e===t}))return{v:t}}();if("object"===f(t))return t.v}o=o.parentElement}return null},L=function(e,t){for(var n=e;n;){if(n.matches(t))return n;n=n.parentElement}return null},M=function(e,t){return-1<e.className.split(" ").map(function(e){return e}).indexOf(t)},j=function(e,t){var n;!e||-1===(n=e.className.split(" ").filter(function(e){return e})).indexOf(t)&&(n.unshift(t),e.className=n.join(" "))},F=function(e,t){var n;e&&(n=e.className.split(" ").filter(function(e){return e&&e!==t}),e.className=n.join(" "))},_=function(e,t){var n=null;try{n=e.removeChild(e.children[t])}catch(e){console.log(e)}return n},V=function(e,t,n){n>=e.children.length?e.appendChild(t):e.insertBefore(t,e.children[n])},X=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():window.document.selection&&window.document.selection.empty()},H=function(e){if(e){var t=window.getComputedStyle(e);if(t)return t.cursor}return null};function Y(e){return!(e.bottom<=e.top||e.right<=e.left)}function k(e){var l=e.element,c=e.draggables;return function(e,t){var n,o=e.removedIndex,r=e.addedIndex,i=e.droppedElement,a=null;null!==o&&(a=_(l,o),c.splice(o,1)),null!==r&&((n=window.document.createElement("div")).className="".concat(b),n.appendChild(a&&a.firstElementChild?a.firstElementChild:i),V(l,n,r),r>=c.length?c.push(n):c.splice(r,0,n)),t&&t(e)}}var G=Object.freeze({domDropHandler:k,reactDropHandler:function(){return{handler:function(){return function(e,t){t&&t(e)}}}}}),W={size:"offsetWidth",distanceToParent:"offsetLeft",translate:"transform",begin:"left",end:"right",dragPosition:"x",scrollSize:"scrollWidth",offsetSize:"offsetWidth",scrollValue:"scrollLeft",scale:"scaleX",setSize:"width",setters:{translate:function(e){return"translate3d(".concat(e,"px, 0, 0)")}}},q={size:"offsetHeight",distanceToParent:"offsetTop",translate:"transform",begin:"top",end:"bottom",dragPosition:"y",scrollSize:"scrollHeight",offsetSize:"offsetHeight",scrollValue:"scrollTop",scale:"scaleY",setSize:"height",setters:{translate:function(e){return"translate3d(0,".concat(e,"px, 0)")}}};function U(o){return{get:function(e,t){return e[o[t]||t]},set:function(e,t,n){e[o[t]]=o.setters[t]?o.setters[t](n):n}}}function $(o,c){o[u]=0;var r=U("horizontal"===c?W:q),s={translation:0};function e(){var e,t;n(o),t=(e=o).getBoundingClientRect(),s.scaleX=e.offsetWidth?(t.right-t.left)/e.offsetWidth:1,s.scaleY=e.offsetHeight?(t.bottom-t.top)/e.offsetHeight:1}function n(e){s.rect=T(e);var t=N(e,s.rect);Y(t)&&(s.lastVisibleRect=s.visibleRect),s.visibleRect=t}function i(e){if(e.tagName){var t=e.getBoundingClientRect();return"vertical"===c?t.bottom-t.top:t.right-t.left}return r.get(e,"size")*r.get(s,"scale")}function t(e){return r.get(e,"dragPosition")}return window.addEventListener("resize",function(){n(o)}),setTimeout(function(){e()},10),{getSize:i,getContainerRectangles:function(){return{rect:s.rect,visibleRect:s.visibleRect,lastVisibleRect:s.lastVisibleRect}},getBeginEndOfDOMRect:function(e){return{begin:r.get(e,"begin"),end:r.get(e,"end")}},getBeginEndOfContainer:function(){return{begin:r.get(s.rect,"begin")+s.translation,end:r.get(s.rect,"end")+s.translation}},getBeginEndOfContainerVisibleRect:function(){return{begin:r.get(s.visibleRect,"begin")+s.translation,end:r.get(s.visibleRect,"end")+s.translation}},getBeginEnd:function(e){var t,n=(t=e,(r.get(t,"distanceToParent")+(t[p]||0))*r.get(s,"scale")+(r.get(s.rect,"begin")+s.translation)-r.get(o,"scrollValue"));return{begin:n,end:n+i(e)*r.get(s,"scale")}},getAxisValue:t,setTranslation:function(e,t){t?r.set(e.style,"translate",t):e.style.removeProperty("transform"),e[p]=t},getTranslation:function(e){return e[p]},setVisibility:function(e,t){void 0!==e[a]&&e[a]===t||(t?e.style.removeProperty("visibility"):e.style.visibility="hidden",e[a]=t)},isVisible:function(e){return void 0===e[a]||e[a]},isInVisibleRect:function(e,t){var n=s.visibleRect,o=n.left,r=n.top,i=n.right,a=n.bottom;a-r<2&&(a=r+30);var l=s.rect;return"vertical"===c?e>l.left&&e<l.right&&r<t&&t<a:o<e&&e<i&&t>l.top&&t<l.bottom},setSize:function(e,t){r.set(e,"setSize",t)},getTopLeftOfElementBegin:function(e){var t=0;return{top:"horizontal"===c?(t=e,s.rect.top):(t=s.rect.left,e),left:t}},getScrollSize:function(e){return r.get(e,"scrollSize")},getScrollValue:function(e){return r.get(e,"scrollValue")},setScrollValue:function(e,t){return r.set(e,"scrollValue",t)},invalidate:e,invalidateRects:function(){n(o)},getPosition:t,setBegin:function(e,t){r.set(e,"begin",t)}}}function J(e,t,n){var o,r,i,a=n.left,l=n.right,c=n.top,s=n.bottom,u=e.x,d=e.y;if(u<a||l<u||d<c||s<d)return null;i="x"===t?(o=a,r=l,u):(o=c,r=s,d);var f=r-o,g=400<f?100:f/4;return r-i<g?{direction:"end",speedFactor:(g-(r-i))/g}:i-o<g?{direction:"begin",speedFactor:(g-(i-o))/g}:null}function K(l,e){var c=1<arguments.length&&void 0!==e?e:"y",s=null,u=null,d=null,f=null;return{animate:function(e,t){d=e,f=t,function a(){null===s&&(s=requestAnimationFrame(function(e){null===u&&(u=e);var t=e-u;u=e;var n,o,r,i=t/1e3*f;o=c,r=i="begin"===d?0-i:i,(n=l)&&(n!==window?"x"===o?n.scrollLeft+=r:n.scrollTop+=r:"x"===o?n.scrollBy(r,0):n.scrollBy(0,r)),s=null,a()}))}()},stop:function(){null!==s&&(cancelAnimationFrame(s),s=null),u=null}}}function Q(e){for(var t=[],n=e.element;n;){var o=function(e){var t=window.getComputedStyle(e),n=t.overflow;if("auto"===n||"scroll"===n)return l.xy;var o=t["overflow-x"],r="auto"===o||"scroll"===o,i=t["overflow-y"],a="auto"===i||"scroll"===i;return r&&a?l.xy:r?l.x:a?l.y:null}(n);if(o&&!M(n,d)){var r={};switch(o){case l.xy:r.x={animator:K(n,"x")},r.y={animator:K(n,"y")};break;case l.x:r.x={animator:K(n,"x")};break;case l.y:r.y={animator:K(n,"y")}}t.push({axisAnimations:r,getRect:function(e){return function(){return N(e,e.getBoundingClientRect())}}(n),scrollerElement:n})}n=n.parentElement}return t}var Z,ee,te,ne=function(e){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1500,a=e.reduce(function(e,t){var n=Q(t).filter(function(t){return!e.find(function(e){return e.scrollerElement===t.scrollerElement})});return[].concat(g(e),g(n))},[]);return function(e){var t,n,o,r,i=e.draggableInfo;e.reset?a.forEach(function(e){e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y&&e.axisAnimations.y.animator.stop()}):i&&(o=a,r=i.mousePosition,o.forEach(function(e){var t=e.axisAnimations,n=(0,e.getRect)();t.x&&(t.x.scrollParams=J(r,"x",n),e.cachedRect=n),t.y&&(t.y.scrollParams=J(r,"y",n),e.cachedRect=n)}),a.forEach(function(e){var t,n,o,r,i,a,l=e.axisAnimations,c=l.x,s=l.y;c&&(c.scrollParams?(n=(t=c.scrollParams).direction,o=t.speedFactor,c.animator.animate(n,o*u)):c.animator.stop()),s&&(s.scrollParams?(i=(r=s.scrollParams).direction,a=r.speedFactor,s.animator.animate(i,a*u)):s.animator.stop())}),(t=a.filter(function(e){return e.cachedRect})).length&&1<t.length&&((n=function(e,t){for(var n=document.elementFromPoint(t.x,t.y);n;){var o=e.find(function(e){return e.scrollerElement===n});if(o)return o;n=n.parentElement}return null}(t,i.mousePosition))&&t.forEach(function(e){e!==n&&(e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y&&e.axisAnimations.y.animator.stop())})))}};"undefined"!=typeof window&&((Z=Element)&&Z.prototype&&!Z.prototype.matches&&(Z.prototype.matches=Z.prototype.matchesSelector||Z.prototype.mozMatchesSelector||Z.prototype.msMatchesSelector||Z.prototype.oMatchesSelector||Z.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;0<=--n&&t.item(n)!==this;);return-1<n}),(ee=Node||Element)&&ee.prototype&&null==ee.prototype.firstElementChild&&Object.defineProperty(ee.prototype,"firstElementChild",{get:function(){for(var e,t=this.childNodes,n=0;e=t[n++];)if(1===e.nodeType)return e;return null}}),Array.prototype.some||(Array.prototype.some=function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,o=2<=arguments.length?arguments[1]:void 0,r=0;r<n;r++)if(r in t&&e.call(o,t[r],r,t))return!0;return!1}));var oe={overflow:"hidden",display:"block"},re={height:"100%",display:"table-cell","vertical-align":"top"},ie=(o(te={},".".concat(w),{position:"relative","min-height":"30px","min-width":"30px"}),o(te,".".concat(w,".horizontal"),{display:"table"}),o(te,".".concat(w,".horizontal > .").concat(h),{display:"inline-block"}),o(te,".".concat(w,".horizontal > .").concat(b),re),o(te,".".concat(w,".vertical > .").concat(b),oe),o(te,".".concat(b),{"box-sizing":"border-box"}),o(te,".".concat(b,".horizontal"),re),o(te,".".concat(b,".vertical"),oe),o(te,".".concat(b,".animated"),{transition:"transform ease"}),o(te,".".concat(C),{"box-sizing":"border-box"}),o(te,".".concat(C,".animated"),{transition:"all ease-in-out"}),o(te,".".concat(C," *"),{"pointer-events":"none"}),o(te,".".concat(c," *"),{"touch-action":"none","-ms-touch-action":"none"}),o(te,".".concat(s),{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),o(te,".".concat(x),{flex:"1"}),o(te,".".concat(w,".horizontal > .").concat(E),{height:"100%",overflow:"hidden",display:"table-cell","vertical-align":"top"}),o(te,".".concat(w,".vertical > .").concat(E),{overflow:"hidden",display:"block",width:"100%"}),o(te,".".concat(S),{width:"100%",height:"100%",display:"flex","justify-content":"stretch","align-items":"stretch"}),o(te,".".concat(y),{"background-color":"rgba(150, 150, 150, 0.1)",border:"1px solid #ccc"}),te);function ae(o){return Object.keys(o).reduce(function(e,t){var n=o[t];return"object"===f(n)?"".concat(e).concat(t,"{").concat(ae(n),"}"):"".concat(e).concat(t,":").concat(n,";")},"")}function le(e){if(e&&"undefined"!=typeof window){var t=window.document.head||window.document.getElementsByTagName("head")[0],n=window.document.createElement("style"),o=ae({"body *":{cursor:"".concat(e," !important")}});return n.type="text/css",n.styleSheet?n.styleSheet.cssText=o:n.appendChild(window.document.createTextNode(o)),t.appendChild(n),n}return null}var ce,se,ue=["mousedown","touchstart"],de=["mousemove","touchmove"],fe=["mouseup","touchend"],ge=null,me=null,pe=null,he=null,ve=[],ye=!1,be=!1,we=!1,xe=!1,Ee=null,Ce=null,Se=null,De=null,Oe=(ce=null,se=!1,{start:function(){se||(se=!0,function e(){ce=requestAnimationFrame(function(){ge.forEach(function(e){return e.layout.invalidateRects()}),setTimeout(function(){null!==ce&&e()},50)})}())},stop:function(){null!==ce&&(cancelAnimationFrame(ce),ce=null),se=!1}}),Re="undefined"!=typeof window&&!!(window.navigator.userAgent.match(/Android/i)||window.navigator.userAgent.match(/webOS/i)||window.navigator.userAgent.match(/iPhone/i)||window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPod/i)||window.navigator.userAgent.match(/BlackBerry/i)||window.navigator.userAgent.match(/Windows Phone/i));function Ae(){"undefined"!=typeof window&&ue.forEach(function(e){window.document.addEventListener(e,ke,{passive:!1})})}function Ie(){de.forEach(function(e){window.document.removeEventListener(e,Ge,{passive:!1})})}function Te(){fe.forEach(function(e){window.document.removeEventListener(e,Qe,{passive:!1})})}function Be(){return he&&he.ghostParent?he.ghostParent:me&&me.parentElement||window.document.body}var Pe,Ne,ze,Le,Me,je,Fe=(Me=1,je=5,function(e,t,n){Pe=Ze(e),ze=n,(Ne="number"==typeof t?t:Re?200:0)&&(Le=setTimeout(Ye,Ne)),de.forEach(function(e){return window.document.addEventListener(e,_e)},{passive:!1}),fe.forEach(function(e){return window.document.addEventListener(e,Ve)},{passive:!1}),window.document.addEventListener("drag",Xe,{passive:!1})});function _e(e){var t=Ze(e),n=t.clientX,o=t.clientY;if(Ne)(Math.abs(Pe.clientX-n)>je||Math.abs(Pe.clientY-o)>je)&&He();else if(Math.abs(Pe.clientX-n)>Me||Math.abs(Pe.clientY-o)>Me)return Ye()}function Ve(){He()}function Xe(){He()}function He(){clearTimeout(Le),de.forEach(function(e){return window.document.removeEventListener(e,_e)},{passive:!1}),fe.forEach(function(e){return window.document.removeEventListener(e,Ve)},{passive:!1}),window.document.removeEventListener("drag",Xe,{passive:!1})}function Ye(){clearTimeout(Le),He(),ze()}function ke(e){var t,n,o,r,i,a=Ze(e);ye||void 0!==a.button&&0!==a.button||(me=L(a.target,"."+b))&&(t=L(me,"."+w),o=(n=ve.filter(function(e){return e.element===t})[0]).getOptions().dragHandleSelector,r=n.getOptions().nonDragAreaSelector,i=!0,o&&!L(a.target,o)&&(i=!1),r&&L(a.target,r)&&(i=!1),n||(window.mp.trigger("ui:generic:debugLog","NON CONTAINER SD FALSE"),i=!1),i&&(n.layout.invalidate(),j(window.document.body,c),j(window.document.body,s),window.document.addEventListener("mouseup",function e(){F(window.document.body,c),F(window.document.body,s),window.document.removeEventListener("mouseup",e)})),i&&Fe(a,n.getOptions().dragBeginDelay,function(){X(),rt(a,H(e.target)),de.forEach(function(e){window.document.addEventListener(e,Ge,{passive:!1})}),fe.forEach(function(e){window.document.addEventListener(e,Qe,{passive:!1})})}))}function Ge(e){e.preventDefault();var t,n=Ze(e);he?("contain"===(t=he.container.getOptions()).behaviour?function(e,t){var n,o,r,i=e.clientX,a=e.clientY,l=1<arguments.length&&void 0!==t?t:"vertical",c=he.container.layout.getBeginEndOfContainerVisibleRect(),s="vertical"===l?(n=a,o="y",r="top",he.size.offsetHeight):(n=i,o="x",r="left",he.size.offsetWidth),u=c.begin,d=c.end-s,f=Math.max(u,Math.min(d,n+pe.positionDelta[r]));pe.topLeft[o]=f,he.position[o]=Math.max(c.begin,Math.min(c.end,n+pe.centerDelta[o])),he.mousePosition[o]=Math.max(c.begin,Math.min(c.end,n)),he.position[o]<c.begin+s/2&&(he.position[o]=c.begin+2),he.position[o]>c.end-s/2&&(he.position[o]=c.end-2)}(n,t.orientation):Se?"y"===Se?(pe.topLeft.y=n.clientY+pe.positionDelta.top,he.position.y=n.clientY+pe.centerDelta.y,he.mousePosition.y=n.clientY):"x"===Se&&(pe.topLeft.x=n.clientX+pe.positionDelta.left,he.position.x=n.clientX+pe.centerDelta.x,he.mousePosition.x=n.clientX):(pe.topLeft.x=n.clientX+pe.positionDelta.left,pe.topLeft.y=n.clientY+pe.positionDelta.top,he.position.x=n.clientX+pe.centerDelta.x,he.position.y=n.clientY+pe.centerDelta.y,he.mousePosition.x=n.clientX,he.mousePosition.y=n.clientY),st(),(xe=!Ee(he))&&Je()):rt(n,H(e.target))}var We,qe,Ue,$e,Je=(We=Ke,Ue=!(qe=20),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];$e&&clearTimeout($e),Ue&&!$e?We.call.apply(We,[null].concat(t)):$e=setTimeout(function(){$e=null,We.call.apply(We,[null].concat(t))},qe)});function Ke(){xe&&(xe=!1,et(he,ge))}function Qe(){function i(){F(pe.ghost,"animated"),pe.ghost.style.transitionDuration=null;try{Be().removeChild(pe.ghost)}catch(e){var t=window.document.querySelector(".smooth-dnd-ghost");t&&t.remove(),console.log(e)}n()}function e(e,t,n){var o=e.top,r=e.left;j(pe.ghost,"animated"),n&&j(pe.ghost.firstElementChild,n),pe.topLeft.x=r,pe.topLeft.y=o,st(t),setTimeout(function(){i()},t+20)}function t(e,t){j(pe.ghost,"animated"),st(e,.9,!0),setTimeout(function(){t()},e+20)}var n,o,r,a,l,c,s,u,d,f,g,m,p;Ie(),Te(),Ce({reset:!0}),De&&(function(e){if(e&&"undefined"!=typeof window){var t=window.document.head||window.document.getElementsByTagName("head")[0];try{t.removeChild(e)}catch(e){console.log(e)}}}(De),De=null),he&&(Oe.stop(),Ke(),we=!0,n=function(){ot(ye=!1);for(var e=ge||[],t=e.shift();void 0!==t;)t.handleDrop(he),t=e.shift();Ee=Se=he=pe=me=ge=null,we=!1},he.targetElement?(o=ve.filter(function(e){return e.element===he.targetElement})[0],!(p=o.getOptions()).shouldAnimateDrop||p.shouldAnimateDrop(he.container.getOptions(),he.payload)?e(o.getDragResult().shadowBeginEnd.rect,Math.max(150,o.getOptions().animationDuration/2),o.getOptions().dropClass):i()):(r=ve.filter(function(e){return e===he.container})[0])?(l=(a=r.getOptions()).behaviour,c=a.removeOnDropOut,"move"!==l&&"contain"!==l||!be&&c||!r.getDragResult()?t(r.getOptions().animationDuration,i):!Y((s=r.layout.getContainerRectangles()).visibleRect)&&Y(s.lastVisibleRect)?e({top:s.lastVisibleRect.top,left:s.lastVisibleRect.left},r.getOptions().animationDuration,r.getOptions().dropClass):(d=(u=r.getDragResult()).removedIndex,f=u.elementSize,g=r.layout,r.getTranslateCalculator({dragResult:{removedIndex:d,addedIndex:d,elementSize:f,pos:void 0,shadowBeginEnd:void 0}}),m=0<d?g.getBeginEnd(r.draggables[d-1]).end:g.getBeginEndOfContainer().begin,e(g.getTopLeftOfElementBegin(m),r.getOptions().animationDuration,r.getOptions().dropClass))):t(D.animationDuration,i))}function Ze(e){return e.touches?e.touches[0]:e}function et(n,e){var o=!1;e.forEach(function(e){var t=e.handleDrag(n);o=!!t.containerBoxChanged||!1,t.containerBoxChanged=!1}),o&&(o=!1,requestAnimationFrame(function(){ve.forEach(function(e){e.layout.invalidateRects(),e.onTranslated()})}))}function tt(e){var t=e,n=null;return function(e){return!(null!==n||!ye||we)&&(n=requestAnimationFrame(function(){ye&&!we&&(et(e,t),Ce({draggableInfo:e})),n=null}),!0)}}function nt(e,t){return e.getOptions().autoScrollEnabled?ne(t,e.getScrollMaxSpeed()):function(e){return null}}function ot(o){ve.forEach(function(e){var t,n=o?e.getOptions().onDragStart:e.getOptions().onDragEnd;n&&(t={isSource:e===he.container,payload:he.payload},e.isDragRelevant(he.container,he.payload)?t.willAcceptDrop=!0:t.willAcceptDrop=!1,n(t))})}function rt(e,t){if(null!==me){ye=!0;var n=ve.filter(function(e){return me.parentElement===e.element})[0];if(!n)return window.mp.trigger("ui:generic:debugLog","NON CONTAINER ID"),ye=!1,Ie(),void Te();n.setDraggables(),Se=n.getOptions().lockAxis?n.getOptions().lockAxis.toLowerCase():null,y=me,b=ve.filter(function(e){return y.parentElement===e.element})[0],w=b.draggables.indexOf(y),x=b.getOptions().getGhostParent,E=y.getBoundingClientRect(),he={container:b,element:y,size:{offsetHeight:E.bottom-E.top,offsetWidth:E.right-E.left},elementIndex:w,payload:b.getOptions().getChildPayload?b.getOptions().getChildPayload(w):void 0,targetElement:null,position:{x:0,y:0},groupName:b.getOptions().groupName,ghostParent:x?x():null,invalidateShadow:null,mousePosition:null,relevantContainers:null},o=me,r={x:e.clientX,y:e.clientY},i=he.container,a=t,l=r.x,c=r.y,s=o.getBoundingClientRect(),u=s.left,d=s.top,f=s.right,g=s.bottom,m=I(i.layout.getContainerRectangles().visibleRect,s),p=m.left+(m.right-m.left)/2,h=m.top+(m.bottom-m.top)/2,(v=o.cloneNode(!0)).style.zIndex="1000",v.style.boxSizing="border-box",v.style.position="fixed",v.style.top="0px",v.style.left="0px",v.style.transform=null,v.style.removeProperty("transform"),i.shouldUseTransformForGhost()?v.style.transform="translate3d(".concat(u,"px, ").concat(d,"px, 0)"):(v.style.top="".concat(d,"px"),v.style.left="".concat(u,"px")),v.style.width=f-u+"px",v.style.height=g-d+"px",v.style.overflow="visible",v.style.transition=null,v.style.removeProperty("transition"),v.style.pointerEvents="none",v.style.userSelect="none",i.getOptions().dragClass?setTimeout(function(){j(v.firstElementChild,i.getOptions().dragClass);var e=window.getComputedStyle(v.firstElementChild).cursor;De=le(e)}):De=le(a),j(v,i.getOptions().orientation||"vertical"),j(v,C),pe={ghost:v,centerDelta:{x:p-l,y:h-c},positionDelta:{left:u-l,top:d-c},topLeft:{x:u,y:d}},he.position={x:e.clientX+pe.centerDelta.x,y:e.clientY+pe.centerDelta.y},he.mousePosition={x:e.clientX,y:e.clientY},ge=ve.filter(function(e){return e.isDragRelevant(n,he.payload)}),he.relevantContainers=ge,Ee=tt(ge),Ce&&Ce({reset:!0,draggableInfo:void 0}),Ce=nt(n,ge),ge.forEach(function(e){return e.prepareDrag(e,ge)}),ot(!0),Ee(he),Be().appendChild(pe.ghost),Oe.start()}var o,r,i,a,l,c,s,u,d,f,g,m,p,h,v,y,b,w,x,E}var it,at,lt,ct=$e=Le=null;function st(e,t,n){var o=0<arguments.length&&void 0!==e?e:0,r=1<arguments.length&&void 0!==t?t:1,i=2<arguments.length&&void 0!==n&&n,a=pe.ghost,l=pe.topLeft,c=l.x,s=l.y,u=!he.container||he.container.shouldUseTransformForGhost(),d=u?"translate3d(".concat(c,"px,").concat(s,"px, 0)"):null;if(1!==r&&(d=d?"".concat(d," scale(").concat(r,")"):"scale(".concat(r,")")),0<o)return pe.ghost.style.transitionDuration=o+"ms",void requestAnimationFrame(function(){d&&(a.style.transform=d),u||(a.style.left=c+"px",a.style.top=s+"px"),ct=null,i&&(a.style.opacity="0")});null===ct&&(ct=requestAnimationFrame(function(){d&&(a.style.transform=d),u||(a.style.left=c+"px",a.style.top=s+"px"),ct=null,i&&(a.style.opacity="0")}))}function ut(){var t;!ye||be||we||(xe=!(be=!0),t=Object.assign({},he,{targetElement:null,position:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},mousePosition:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER}}),ge.forEach(function(e){e.handleDrag(t)}),he.targetElement=null,he.cancelDrop=!0,Qe(),be=!1)}"undefined"!=typeof window&&"undefined"!=typeof window&&(it=window.document.head||window.document.getElementsByTagName("head")[0],(at=window.document.createElement("style")).id="smooth-dnd-style-definitions",lt=ae(ie),at.type="text/css",at.styleSheet?at.styleSheet.cssText=lt:at.appendChild(window.document.createTextNode(lt)),it.appendChild(at));var dt=(Ae(),{register:function(e){var t;t=e,ve.push(t),ye&&he&&t.isDragRelevant(he.container,he.payload)&&(ge.push(t),t.prepareDrag(t,ge),Ce&&Ce({reset:!0,draggableInfo:void 0}),Ce=nt(t,ge),Ee=tt(ge),t.handleDrag(he))},unregister:function(e){var t,n;t=e,ve.splice(ve.indexOf(t),1),ye&&he&&(he.container===t&&t.fireRemoveElement(),he.targetElement===t.element&&(he.targetElement=null),-1<(n=ge.indexOf(t))&&(ge.splice(n,1),Ce&&Ce({reset:!0,draggableInfo:void 0}),Ce=nt(t,ge),Ee=tt(ge)))},isDragging:function(){return ye},cancelDrag:ut});function ft(e,t,n){var o=2<arguments.length&&void 0!==n?n:D.animationDuration;t?(j(e,i),e.style.transitionDuration=o+"ms"):(F(e,i),e.style.removeProperty("transition-duration"))}function gt(n){var o=[];return Array.prototype.forEach.call(n.children,function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e;M(e,b)||(t=function(e){if(Mt.wrapChild){var t=window.document.createElement("div");return t.className="".concat(b),e.parentElement.insertBefore(t,e),t.appendChild(e),t}return e}(e)),t[p]=0,o.push(t)}else try{n.removeChild(e)}catch(e){console.log(e)}}),o}function mt(e){var m=e.layout;return function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return function e(t,n,o,r,i){var a=4<arguments.length&&void 0!==i&&i;if(r<o)return o;if(o===r){var l=m.getBeginEnd(t[o]),c=l.begin,s=l.end;return!a||n<(s+c)/2?o:o+1}var u=Math.floor((r+o)/2),d=m.getBeginEnd(t[u]),f=d.begin,g=d.end;return n<f?e(t,n,o,u-1,a):g<n?e(t,n,u+1,r,a):!a||n<(g+f)/2?u:u+1}(e,t,0,e.length-1,n)}}function pt(e){var t,n,o,r,i=e.element,a=e.draggables,l=e.layout,c=e.getOptions,s=(n=(t={element:i,draggables:a,layout:l,getOptions:c}).element,o=t.draggables,r=t.layout,function(){if(o.forEach(function(e){ft(e,!1),r.setTranslation(e,0),r.setVisibility(e,!0)}),n[v])try{n[v].parentNode.removeChild(n[v]),n[v]=null}catch(e){console.log(e)}}),u=(Mt.dropHandler||k)({element:i,draggables:a,layout:l,getOptions:c});return function(e,t){var n,o=t.addedIndex,r=t.removedIndex,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];s(),e.cancelDrop||(e.targetElement||c().removeOnDropOut||i)&&(n={removedIndex:r,addedIndex:null!==o?null!==r&&r<o?o-1:o:null,payload:e.payload},u(n,c().onDrop))}}function ht(e){var o=e.element,r=e.getOptions,i=null;return function(e){var t=e.draggableInfo,n=i;return null==i&&t.container.element===o&&"copy"!==r().behaviour&&(n=i=t.elementIndex),{removedIndex:n}}}function vt(e){var n=e.draggables,o=e.layout;return function(e){var t=e.dragResult;null!==t.removedIndex&&o.setVisibility(n[t.removedIndex],!1)}}function yt(e){var r=e.element,i=e.layout;return function(e){var t=e.draggableInfo,n=document.elementFromPoint(t.position.x,t.position.y);if(n){var o=z(n,t.relevantContainers);if(o&&o.element===r)return{pos:i.getPosition(t.position)}}return{pos:null}}}function bt(e){var n=e.layout,o=null;return function(e){var t=e.draggableInfo;return null===e.dragResult.pos?o=null:{elementSize:o=o||n.getSize(t.size)}}}function wt(e){var o=e.element;return function(e){var t=e.draggableInfo,n=e.dragResult;!function(e,t,n){t&&(!(2<arguments.length&&void 0!==n)||n)?e.targetElement=t:e.targetElement===t&&(e.targetElement=null)}(t,o,!!n.pos)}}function xt(){return function(e){return null!==e.dragResult.pos?{addedIndex:0}:{addedIndex:null}}}function Et(e){var r=e.layout,i=null;return function(e){var t=e.dragResult.addedIndex;if(t===i)return null;i=t;var n=r.getBeginEndOfContainer(),o=n.begin;n.end;return{shadowBeginEnd:{rect:r.getTopLeftOfElementBegin(o)}}}}function Ct(e){var g=e.layout,m=e.element,p=e.getOptions,h=null;return function(e){var t=e.dragResult,n=t.elementSize,o=t.shadowBeginEnd,r=t.addedIndex,i=t.dropPlaceholderContainer,a=p();if(a.dropPlaceholder){var l,c,s="boolean"==typeof a.dropPlaceholder?{}:a.dropPlaceholder,u=s.animationDuration,d=s.className,f=s.showOnTop;if(null!==r)return i||(l=document.createElement("div"),(c=document.createElement("div")).className=S,l.className="".concat(x," ").concat(d||y),(i=document.createElement("div")).className="".concat(E),i.style.position="absolute",void 0!==u&&(i.style.transition="all ".concat(u,"ms ease")),i.appendChild(c),c.appendChild(l),g.setSize(i.style,n+"px"),i.style.pointerEvents="none",f?m.appendChild(i):m.insertBefore(i,m.firstElementChild)),h!==r&&o.dropArea&&g.setBegin(i.style,o.dropArea.begin-g.getBeginEndOfContainer().begin+"px"),h=r,{dropPlaceholderContainer:i};if(i&&null!==h)try{m.removeChild(i)}catch(e){console.log(e)}return h=null,{dropPlaceholderContainer:void 0}}return null}}function St(e){var o=It(e);return function(e){var t=e.draggableInfo,n=e.dragResult;return t.invalidateShadow?o({draggableInfo:t,dragResult:n}):null}}function Dt(e){var t,i,a,o=(i=(t=e).draggables,a=mt({layout:t.layout}),function(e){var t=e.dragResult,n=t.shadowBeginEnd,o=t.pos;if(n)return n.begin+n.beginAdjustment<=o&&n.end>=o?null:o<n.begin+n.beginAdjustment?a(i,o):o>n.end?a(i,o)+1:i.length;var r=a(i,o,!0);return null!==r?r:i.length});return function(e){var t=e.dragResult,n=null;return null!==t.pos&&null===(n=o({dragResult:t}))&&(n=t.addedIndex),{addedIndex:n}}}function Ot(){var r=null;return function(e){var t=e.dragResult,n=t.addedIndex,o=t.shadowBeginEnd;n!==r&&null!==r&&o&&(o.beginAdjustment=0),r=n}}function Rt(e){var u=e.element,d=e.draggables,f=e.layout,g=e.getOptions,m=null;return function(e){var t=e.dragResult,n=t.addedIndex,o=t.removedIndex,r=t.elementSize;if(null===o)if(null!==n){if(!m){var i=f.getBeginEndOfContainer();i.end=i.begin+f.getSize(u);var a=f.getScrollSize(u)>f.getSize(u)?i.begin+f.getScrollSize(u)-f.getScrollValue(u):i.end,l=0<d.length?f.getBeginEnd(d[d.length-1]).end-d[d.length-1][p]:i.begin;if(a<l+r){(m=window.document.createElement("div")).className=h+" "+g().orientation;var c=0<d.length?r+l-a:r;return f.setSize(m.style,"".concat(c,"px")),u.appendChild(m),u[v]=m,{containerBoxChanged:!0}}}}else if(m){f.setTranslation(m,0);var s=m;m=null;try{u.removeChild(s)}catch(e){console.log(e)}return{containerBoxChanged:!(u[v]=null)}}}}function At(e){var c=e.draggables,s=e.layout,u=null,d=null;return function(e){var t=e.dragResult,n=t.addedIndex,o=t.removedIndex,r=t.elementSize;if(n!==u||o!==d){for(var i,a,l=0;l<c.length;l++){l!==o&&(i=c[l],a=0,null!==o&&o<l&&(a-=r),null!==n&&n<=l&&(a+=r),s.setTranslation(i,a))}return{addedIndex:u=n,removedIndex:d=o}}}}function It(e){var x=e.draggables,E=e.layout,C=null;return function(e){var t=e.draggableInfo,n=e.dragResult,o=n.addedIndex,r=n.removedIndex,i=n.elementSize,a=n.pos,l=n.shadowBeginEnd;if(null===a)return{shadowBeginEnd:C=null};if(null===o||!t.invalidateShadow&&o===C)return null;var c,s,u=o-1,d=Number.MIN_SAFE_INTEGER,f=0,g=0,m=null,p=null;u===r&&u--,f=-1<u?(c=E.getSize(x[u]),p=E.getBeginEnd(x[u]),d=i<c?(s=(c-i)/2,p.end-s):p.end,p.end):(p={end:E.getBeginEndOfContainer().begin},E.getBeginEndOfContainer().begin);var h,v,y=Number.MAX_SAFE_INTEGER,b=o;b===r&&b++,g=b<x.length?(h=E.getSize(x[b]),m=E.getBeginEnd(x[b]),y=i<h?(v=(h-i)/2,m.begin+v):m.begin,m.begin):(m={begin:E.getContainerRectangles().rect.end},E.getContainerRectangles().rect.end-E.getContainerRectangles().rect.begin);var w=p&&m?E.getTopLeftOfElementBegin(p.end):null;return C=o,{shadowBeginEnd:{dropArea:{begin:f,end:g},begin:d,end:y,rect:w,beginAdjustment:l?l.beginAdjustment:0}}}}function Tt(){var a=null;return function(e){var t,n=e.dragResult,o=n.pos,r=n.addedIndex,i=n.shadowBeginEnd;null!==o?null!=r&&null===a&&(o<i.begin&&(t=o-i.begin-5,i.beginAdjustment=t),a=r):a=null}}function Bt(e){var t=e.getOptions,n=!1,o=t();return function(e){var t=!!e.dragResult.pos;t!==n&&((n=t)?o.onDragEnter&&o.onDragEnter():o.onDragLeave&&o.onDragLeave())}}function Pt(e){var t=e.getOptions,c=null,s=t();return function(e){var t,n=e.dragResult,o=n.addedIndex,r=n.removedIndex,i=e.draggableInfo,a=i.payload,l=i.element;s.onDropReady&&null!==o&&c!==o&&(t=c=o,null!==r&&r<o&&t--,s.onDropReady({addedIndex:t,removedIndex:r,payload:a,element:l?l.firstElementChild:void 0}))}}function Nt(e){return"drop-zone"===e.getOptions().behaviour?zt(e)(ht,vt,yt,bt,wt,xt,Et,Bt,Pt):zt(e)(ht,vt,yt,bt,wt,St,Dt,Ot,Rt,At,It,Ct,Tt,Bt,Pt)}function zt(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.map(function(e){return e(i)}),r=null;return function(n){return r=o.reduce(function(e,t){return Object.assign(e,t({draggableInfo:n,dragResult:e}))},r||{addedIndex:null,removedIndex:null,elementSize:null,pos:null,shadowBeginEnd:null})}}}function Lt(y){return function(e){var t,n,o,r,i,a,l,c=Object.assign({},D,e),s=null,u=null,d=(n=v,o=gt(t=y),r=n(),j(t,"".concat(w," ").concat(r.orientation)),{element:t,draggables:o,getOptions:n,layout:$(t,r.orientation,r.animationDuration)}),f=Nt(d),g=pt(d),m=A(y,function(){d.layout.invalidateRects(),p()});function p(){null!==u&&(u.invalidateShadow=!0,s=f(u),u.invalidateShadow=!1)}function h(e,t){for(var n=gt(t),o=0;o<n.length;o++)e[o]=n[o];for(var r=0;r<e.length-n.length;r++)e.pop()}function v(){return c}return{element:y,draggables:d.draggables,isDragRelevant:(a=(i=d).element,l=i.getOptions,function(e,t){var n=l();if(n.shouldAcceptDrop)return n.shouldAcceptDrop(e.getOptions(),t);var o=e.getOptions();return"copy"!==n.behaviour&&L(a,"."+b)!==e.element&&(e.element===a||!(!o.groupName||o.groupName!==n.groupName))}),layout:d.layout,dispose:function(e){var t;m.dispose(),t=e.element,Mt.wrapChild&&Array.prototype.forEach.call(t.children,function(e){if(e.nodeType===Node.ELEMENT_NODE&&M(e,b)){t.insertBefore(e.firstElementChild,e);try{t.removeChild(e)}catch(e){console.log(e)}}})},prepareDrag:function(e,t){var n=e.element,o=d.draggables;h(o,n),e.layout.invalidateRects(),o.forEach(function(e){return ft(e,!0,c.animationDuration)}),m.start()},handleDrag:function(e){return s=f(u=e)},handleDrop:function(e){if(m.stop(),s&&s.dropPlaceholderContainer)try{y.removeChild(s.dropPlaceholderContainer)}catch(e){console.log(e)}u=null,f=Nt(d),g(e,s),s=null},fireRemoveElement:function(){g(u,Object.assign({},s,{addedIndex:null}),!0),s=null},getDragResult:function(){return s},getTranslateCalculator:function(e){return At(d)(e)},onTranslated:function(){p()},setDraggables:function(){h(d.draggables,y)},getScrollMaxSpeed:function(){return Mt.maxScrollSpeed},shouldUseTransformForGhost:function(){return!0===Mt.useTransformForGhost},getOptions:v,setOptions:function(e){c=!1===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])?Object.assign({},D,e):Object.assign({},D,c,e)}}}}var Mt=function(e,t){var n=Lt(e)(t);return e[r]=n,dt.register(n),{dispose:function(){dt.unregister(n),n.dispose(n)},setOptions:function(e,t){n.setOptions(e,t)}}};function jt(e,t,n){Object.defineProperty(e,n,{set:function(e){t[n]=e},get:function(){return t[n]}})}Mt.wrapChild=!0,Mt.cancelDrag=function(){dt.cancelDrag()},Mt.isDragging=function(){return dt.isDragging()};function Ft(e,t){return console.warn('default export is deprecated. please use named export "smoothDnD"'),Mt(e,t)}Ft.cancelDrag=function(){Mt.cancelDrag()},Ft.isDragging=function(){return Mt.isDragging()},jt(Ft,Mt,"useTransformForGhost"),jt(Ft,Mt,"maxScrollSpeed"),jt(Ft,Mt,"wrapChild"),jt(Ft,Mt,"dropHandler"),e.smoothDnD=Mt,e.constants=n,e.dropHandlers=G,e.default=Ft,Object.defineProperty(e,"__esModule",{value:!0})});
